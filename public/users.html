<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuários</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Cabeçalho de Navegação -->
    <header>
        <nav>
            <!-- Ajustar Classe -->
            <div class="logo">
                <a href="/" class="nav-link return">« Retornar</a>
            </div>
        </nav>
    </header>

    <!-- Conteúdo Principal e Formulário -->
    <main>
        <div class="form-container">
            
            <!-- Título da Seção -->
            <h1 class="title">
                Cadastrar Usuário
            </h1>
            <p class="subtitle">
                Crie o seu usuário
            </p>

            <!-- Formulário -->
            <form action="/" method="GET" class="form-content">

                <!-- Campo Nome -->
                <div class="form-group">
                    <input type="text" id="nome" name="nome" placeholder="Nome" required
                        class="input-field">
                </div>

                <!-- Campo Usuário -->
                <div class="form-group">
                    <input type="text" id="usuario" name="usuario" placeholder="Usuário" required
                        class="input-field">
                </div>

                <!-- Radio Gênero -->
                <div class="radio-field">
                    <label>Gênero: </label>
                    <label><input type="radio" name="radio" id="radio1"> Masculino</label>
                    <label><input type="radio" name="radio" id="radio2"> Feminino</label>
                    <label><input type="radio" name="radio" id="radio3"> Outro</label>
                </div>

                <!-- Campo Email -->
                <div class="form-group">
                    <input type="email" id="email" name="email" placeholder="Email" required
                        class="input-field">
                </div>

                <!-- Campo Senha -->
                <div class="form-group">
                    <input type="password" id="senha" name="senha" placeholder="Senha" required
                        class="input-field">
                </div>

                <!-- CheckBox -->
                <label><input type="checkbox" id="checkbox"> Eu concordo com os termos</label>

                <!-- Botão CRIAR -->
                <div class="button-container">
                    <button type="submit" class="btn-submit" id="btn-submit">
                        CRIAR
                    </button>
                </div>

                <h2>Usuários Cadastrados</h2>
                <ul id="lista-users"></ul>

            </form>
        </div>
    </main>
    <script>
        document.querySelector('form').addEventListener('submit', (e) => {
            e.preventDefault();

            const nome  = document.getElementById('nome').value;
            const user  = document.getElementById('usuario').value;

            const r1 = document.getElementById('radio1').checked;
            const r2 = document.getElementById('radio2').checked;
            const r3 = document.getElementById('radio3').checked;
            const genero = r1 ? 'Masculino' : r2 ? 'Feminino' : r3 ? 'Outro' : 'Nenhum';

            const senha = document.getElementById('senha').value;
            const email = document.getElementById('email').value;
            const cb = document.getElementById('checkbox').checked;

            alert(`Nome: ${nome}, User: ${user}, Genero: ${genero}, Senha: ${senha}, Email: ${email}, Concordancia com os Termos: ${cb}`);
            
            // Envia para API
            fetch('/api/users', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    nome,
                    user,
                    genero,
                    senha,
                    email,
                    termo: cb
                })
            })
            .then(res => res.json())
            .then(novo => {
                const lista = document.getElementById('lista-users');
                lista.innerHTML += `
                    <li>
                        <strong>${novo.id}</strong> - 
                        ${novo.nome} | 
                        ${novo.user} | 
                        ${novo.genero} | 
                        ${novo.email}
                    </li>`;
            });
        });
        fetch('/api/users')
          .then(res => res.json())
          .then(users => {
            const lista = document.getElementById('lista-users');
            lista.innerHTML = users
                .map(u => `
                    <li>
                        <strong>${u.id}</strong> - 
                        ${u.nome} | 
                        ${u.user} | 
                        ${u.genero} | 
                        ${u.email}
                    </li>`)
                .join('');
        });
    </script>
</body>
</html>